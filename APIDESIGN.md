# Uno API Design

| Action              | Inputs/Data                  | Pre-conditions                                                                 | Post-conditions                                                                                                                                                                                                                                                                                         | API Endpoint                                                                                                              |
| ------------------- | ---------------------------- | ------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------- |
| Create a game       | player_id, game_title, count |                                                                                | A new game is created and shown in the global lobby's list of games. Player is redirected to the waiting room or game room                                                                                                                                                                              | POST /games/create<br><br>{game_title, player_count }<br><br>(player_id is available in the session)                      |
| Start a game        | game_id                      | The game exists and has at least two players                                   | A new game is started with a deck of shuffled cards. A starting hand is dealt to each player, and a chat box is created for the game                                                                                                                                                                    | POST /games/:game_id/start                                                                                                |
| End a game          | player_id, game_id           | The game exists                                                                | Game is ended by the host player or when there is a winner. Players are redirected to the lobby                                                                                                                                                                                                         | POST /games/:game_id/end <br><br>(game_id is provided in url, player_id is available in the session)                      |
| Play a card         | game_id, player_id, card_id  | The game and player exist, and it's the player's turn to play                  | The card is added to the top of the discard pile and removed from the player's hand if their card matches the color, number, or type from top of the discard pile. Special cards will also be handled such as wild cards, skip cards, draw two cards, and reverse cards. The game state is then updated | PUT /games/:game_id/play <br><br>{ card_id }<br><br>(game_id is provided in url, player_id is available in the session)   |
| Draw a card         | game_id, player_id, card_id  | The game and player exist, and it's the player's turn to draw                  | A card is drawn from the top of the deck and added to the player's hand, and the game state is updated                                                                                                                                                                                                  | PUT /games/:game_id/draw <br><br> { card_id } <br><br>(game_id is provided in url, player_id is available in the session) |
| Call Uno            | game_id, player_id           | The game and player exist, and the player has only one card left in their hand | The player is marked as having called Uno. If they fail to call then they must draw two cards                                                                                                                                                                                                           | PUT /games/:game_id/uno <br><br>(game_id is provided in url, player_id is available in the session)                       |
| Send a chat message | game_id, player_id, message  | The game and player exist                                                      | The message and player id is added to the chat box for the game                                                                                                                                                                                                                                         | POST /games/:game_id/chat <br><br>{ message }<br><br>(game_id is provided in url, player_id is available in the session)  |
| Save player state   | game_id, player_id           | The game and player exist                                                      | The player's current state is saved in the database, so that they can leave the game and rejoin later without losing their progress                                                                                                                                                                     | PUT /games/:game_id/state <br><br>(game_id is provided in url, player_id is available in the session)                     |
| Get game state      | game_id                      | A game with the game_id exists                                                 | Returns the current state of the game which contains the current player, their hand, the top card of the discard pile, and the chat messages                                                                                                                                                            | GET /games/:game_id/state                                                                                                 |
| Get all games       |                              |                                                                                | Returns all games with game id and current number of players                                                                                                                                                                                                                                            | GET /games/all-games                                                                                                      |
